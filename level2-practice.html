<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DASI English - Level 2 ì—°ìŠµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4338ca, #7c3aed);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .stage-info {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .content {
            padding: 40px;
            text-align: center;
        }
        
        .question-card {
            background: #f8fafc;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .korean-text {
            font-size: 1.8em;
            color: #1f2937;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .answer-input {
            font-size: 1.5em;
            padding: 15px;
            border: 2px solid #d1d5db;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #4338ca;
            box-shadow: 0 0 0 3px rgba(67, 56, 202, 0.1);
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-ai {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .progress {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            display: none;
        }
        
        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }
        
        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border: 2px solid #ef4444;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background: #f1f5f9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #4338ca;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #6b7280;
            margin-top: 5px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .korean-text {
                font-size: 1.4em;
            }
            
            .answer-input {
                font-size: 1.2em;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ Level 2 ì—°ìŠµ</h1>
            <p id="stage-title">ê¸°ë³¸ ë¬¸ë²• íŒ¨í„´</p>
            <div class="stage-info">
                <div id="stage-description">ìŠ¤í…Œì´ì§€ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <div class="progress">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em;">
                    <span id="current-question">1</span>
                    <span id="total-questions">15</span>
                </div>
            </div>
        </div>
        
        <div class="content">
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="correct-count">0</div>
                    <div class="stat-label">ì •ë‹µ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="accuracy">0%</div>
                    <div class="stat-label">ì •í™•ë„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="remaining">15</div>
                    <div class="stat-label">ë‚¨ì€ ë¬¸ì œ</div>
                </div>
            </div>
            
            <div class="question-card">
                <div class="korean-text" id="korean-question">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <input type="text" class="answer-input" id="answer-input" placeholder="ì˜ì–´ë¡œ ë²ˆì—­í•˜ì„¸ìš”" autocomplete="off">
                <div class="feedback" id="feedback"></div>
            </div>
            
            <div class="buttons">
                <button class="btn btn-primary" id="check-btn">âœ“ ë‹µì•ˆ í™•ì¸</button>
                <button class="btn btn-secondary" id="skip-btn">â†’ ë„˜ì–´ê°€ê¸°</button>
                <button class="btn btn-secondary" id="hint-btn">ğŸ’¡ íŒíŠ¸</button>
                <button class="btn btn-ai" id="ai-btn">ğŸ¤– AI ì½”ì¹­</button>
                <a href="level-system.html" class="btn btn-danger">â† ëŒì•„ê°€ê¸°</a>
            </div>
        </div>
    </div>

    <script>
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ìŠ¤í…Œì´ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const stageNumber = parseInt(urlParams.get('stage')) || 1;
        
        // Level 2 ìŠ¤í…Œì´ì§€ ë°ì´í„° ë¡œë“œ
        let stageData = null;
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalAttempts = 0;
        
        // Level 2 JSON ë°ì´í„°ë¥¼ ë™ì ìœ¼ë¡œ ë¡œë“œ
        async function loadLevel2Data() {
            try {
                const response = await fetch('/patterns/level_2_basic_grammar/lv2_stage_system.json');
                const data = await response.json();
                
                stageData = data.stages.find(stage => stage.stage === stageNumber);
                if (!stageData) {
                    throw new Error(`Stage ${stageNumber} not found`);
                }
                
                initializeStage();
            } catch (error) {
                console.error('Level 2 ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                alert('ìŠ¤í…Œì´ì§€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                window.location.href = 'level-system.html';
            }
        }
        
        // ìŠ¤í…Œì´ì§€ ì´ˆê¸°í™”
        function initializeStage() {
            // í—¤ë” ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('stage-title').textContent = `Stage ${stageNumber}: ${stageData.title}`;
            
            // í’ë¶€í•œ ìŠ¤í…Œì´ì§€ ì •ë³´ í‘œì‹œ
            const patterns = stageData.patterns ? stageData.patterns.join(' | ') : '';
            const totalSentences = Object.values(stageData.sentence_variations).reduce((sum, variations) => sum + variations.length, 0);
            
            document.getElementById('stage-description').innerHTML = `
                <div style="margin-bottom: 10px;">
                    <strong>ğŸ“š í•™ìŠµ ëª©í‘œ:</strong> ${stageData.grammar_focus}
                </div>
                <div style="margin-bottom: 10px; font-size: 0.9em; opacity: 0.9;">
                    <strong>ğŸ”¢ ë¬¸ì œ êµ¬ì„±:</strong> ${totalSentences}ê°œ ë¬¸ì¥ | 
                    <strong>ğŸ¯ ëª©í‘œ ì •í™•ë„:</strong> 80% ì´ìƒ
                </div>
                ${patterns ? `<div style="font-size: 0.85em; opacity: 0.8;"><strong>íŒ¨í„´:</strong> ${patterns}</div>` : ''}
            `;
            
            // ëª¨ë“  ë¬¸ì¥ ë³€í˜•ì„ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹˜ê¸°
            currentQuestions = [];
            
            Object.values(stageData.sentence_variations).forEach(variations => {
                currentQuestions.push(...variations);
            });
            
            // ë¬¸ì œ ìˆœì„œ ì„ê¸°
            currentQuestions = shuffleArray(currentQuestions);
            
            // ì´ ë¬¸ì œ ìˆ˜ ì—…ë°ì´íŠ¸
            document.getElementById('total-questions').textContent = currentQuestions.length;
            document.getElementById('remaining').textContent = currentQuestions.length;
            
            // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ
            showCurrentQuestion();
        }
        
        // ë°°ì—´ ì„ê¸° í•¨ìˆ˜
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        // í˜„ì¬ ë¬¸ì œ í‘œì‹œ
        function showCurrentQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                showResults();
                return;
            }
            
            const question = currentQuestions[currentQuestionIndex];
            
            // ë¬¸ì œ í‘œì‹œ
            document.getElementById('korean-question').textContent = question.ko;
            document.getElementById('answer-input').value = '';
            document.getElementById('answer-input').focus();
            
            // ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('remaining').textContent = currentQuestions.length - currentQuestionIndex;
            
            const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            // í”¼ë“œë°± ìˆ¨ê¸°ê¸°
            document.getElementById('feedback').style.display = 'none';
        }
        
        // ë‹µì•ˆ í™•ì¸
        function checkAnswer() {
            const userAnswer = document.getElementById('answer-input').value.trim().toLowerCase();
            const correctAnswer = currentQuestions[currentQuestionIndex].en.toLowerCase();
            const feedback = document.getElementById('feedback');
            
            totalAttempts++;
            
            // ê°„ë‹¨í•œ ë‹µì•ˆ ê²€ì¦ (ê³µë°±ê³¼ ëŒ€ì†Œë¬¸ì ë¬´ì‹œ, êµ¬ë‘ì  í—ˆìš©)
            const normalizeAnswer = (text) => {
                return text.replace(/[.,!?]/g, '').replace(/\s+/g, ' ').trim();
            };
            
            const isCorrect = normalizeAnswer(userAnswer) === normalizeAnswer(correctAnswer);
            
            if (isCorrect) {
                correctAnswers++;
                feedback.className = 'feedback correct';
                feedback.textContent = 'ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!';
                feedback.style.display = 'block';
                
                setTimeout(() => {
                    nextQuestion();
                }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `âŒ ì •ë‹µ: ${currentQuestions[currentQuestionIndex].en}`;
                feedback.style.display = 'block';
                
                setTimeout(() => {
                    nextQuestion();
                }, 2500);
            }
            
            updateStats();
        }
        
        // ë‹¤ìŒ ë¬¸ì œë¡œ
        function nextQuestion() {
            currentQuestionIndex++;
            showCurrentQuestion();
        }
        
        // ë„˜ì–´ê°€ê¸°
        function skipQuestion() {
            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback incorrect';
            feedback.textContent = `ì •ë‹µ: ${currentQuestions[currentQuestionIndex].en}`;
            feedback.style.display = 'block';
            
            totalAttempts++;
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
            
            updateStats();
        }
        
        // íŒíŠ¸ í‘œì‹œ
        function showHint() {
            const correctAnswer = currentQuestions[currentQuestionIndex].en;
            const hintLength = Math.min(3, Math.floor(correctAnswer.length / 3));
            const hint = correctAnswer.substring(0, hintLength) + '...';
            
            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback';
            feedback.style.background = '#fef3c7';
            feedback.style.color = '#92400e';
            feedback.style.border = '2px solid #f59e0b';
            feedback.textContent = `ğŸ’¡ íŒíŠ¸: ${hint}`;
            feedback.style.display = 'block';
        }
        
        // AI ì½”ì¹­ ê¸°ëŠ¥
        async function showAICoaching() {
            const userAnswer = document.getElementById('answer-input').value.trim();
            const correctAnswer = currentQuestions[currentQuestionIndex].en;
            const koreanQuestion = currentQuestions[currentQuestionIndex].ko;
            const feedback = document.getElementById('feedback');
            
            if (!userAnswer) {
                feedback.className = 'feedback';
                feedback.style.background = '#fff3cd';
                feedback.style.color = '#856404';
                feedback.style.border = '2px solid #ffc107';
                feedback.textContent = 'ğŸ¤– ë¨¼ì € ë‹µì„ ì…ë ¥í•´ì£¼ì„¸ìš”!';
                feedback.style.display = 'block';
                return;
            }
            
            // AI ë¶„ì„ ì¤‘ í‘œì‹œ
            feedback.className = 'feedback';
            feedback.style.background = '#e3f2fd';
            feedback.style.color = '#1565c0';
            feedback.style.border = '2px solid #2196f3';
            feedback.innerHTML = 'ğŸ¤– AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... <div style="margin-top: 10px;"><div style="width: 20px; height: 20px; border: 2px solid #ccc; border-top: 2px solid #1565c0; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div></div>';
            feedback.style.display = 'block';
            
            // ê°„ë‹¨í•œ ë”œë ˆì´ ì¶”ê°€ (AI ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜)
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const aiResponse = generateLevel2AIFeedback(userAnswer, correctAnswer, koreanQuestion, stageData);
            
            feedback.className = 'feedback';
            feedback.style.background = '#e8f5e8';
            feedback.style.color = '#2d5a2d';
            feedback.style.border = '2px solid #4caf50';
            feedback.innerHTML = aiResponse;
            feedback.style.display = 'block';
        }
        
        // Level 2 AI í”¼ë“œë°± ìƒì„±
        function generateLevel2AIFeedback(userAnswer, correctAnswer, koreanQuestion, stageData) {
            const isCorrect = userAnswer.toLowerCase().trim() === correctAnswer.toLowerCase().trim();
            
            if (isCorrect) {
                return `
ğŸ¯ **ì •í™•í•´ìš”!** "${userAnswer}"<br><br>
ğŸ“š **ë¬¸ë²• í¬ì¸íŠ¸**: ${stageData.title} íŒ¨í„´ì„ ì™„ë²½í•˜ê²Œ ì ìš©í–ˆì–´ìš”!<br>
ğŸ’¡ **í•œêµ­ì¸ íŠ¹í™” íŒ**: ${stageData.grammar_focus}<br>
âœ¨ **ê¸°ì–µë²•**: ì´ íŒ¨í„´ êµ¬ì¡°ë¥¼ ì˜ ê¸°ì–µí•˜ê³  ìˆë„¤ìš”!<br>
ğŸ”¥ **ê²©ë ¤**: ê¸°ë³¸ ë¬¸ë²•ì„ í™•ì‹¤íˆ ë‹¤ì§€ê³  ìˆìŠµë‹ˆë‹¤! ê³„ì† í™”ì´íŒ…! ğŸ’ª
                `;
            }
            
            const differences = analyzeLevel2Differences(userAnswer, correctAnswer);
            const grammarTip = getLevel2GrammarTip(stageData);
            
            return `
ğŸ¯ **ë¶„ì„**: ${differences}<br><br>
ğŸ“š **ë¬¸ë²• í¬ì¸íŠ¸**: ${grammarTip}<br>
ğŸ’¡ **í•œêµ­ì¸ íŠ¹í™” íŒ**: "${correctAnswer}" - ì–´ìˆœê³¼ ë™ì‚¬ í˜•íƒœì— ì£¼ì˜!<br>
âœ¨ **ê¸°ì–µë²•**: ${getLevel2MemoryTip(stageData, correctAnswer)}<br>
ğŸ”¥ **ê²©ë ¤**: ê¸°ë³¸ê¸°ê°€ ì¤‘ìš”í•´ìš”. ì²œì²œíˆ ì •í™•í•˜ê²Œ ì—°ìŠµí•˜ì„¸ìš”! ğŸŒŸ
            `;
        }
        
        // Level 2 ë‹µë³€ ì°¨ì´ì  ë¶„ì„
        function analyzeLevel2Differences(userAnswer, correctAnswer) {
            if (!userAnswer) return "ë‹µë³€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
            
            const userLower = userAnswer.toLowerCase().trim();
            const correctLower = correctAnswer.toLowerCase().trim();
            
            if (userLower === correctLower) return "ì •í™•í•©ë‹ˆë‹¤!";
            
            // beë™ì‚¬ vs ì¼ë°˜ë™ì‚¬ êµ¬ë¶„
            if (correctAnswer.includes(" am ") || correctAnswer.includes(" are ") || correctAnswer.includes(" is ")) {
                if (!userAnswer.includes(" am ") && !userAnswer.includes(" are ") && !userAnswer.includes(" is ")) {
                    return "beë™ì‚¬(am/are/is)ê°€ ë¹ ì¡ŒìŠµë‹ˆë‹¤.";
                }
            }
            
            // Do/Does êµ¬ë¶„
            if (correctAnswer.toLowerCase().startsWith("do ") || correctAnswer.toLowerCase().startsWith("does ")) {
                if (userAnswer.toLowerCase().startsWith("does ") && correctAnswer.toLowerCase().startsWith("do ")) {
                    return "Do you (2ì¸ì¹­)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.";
                } else if (userAnswer.toLowerCase().startsWith("do ") && correctAnswer.toLowerCase().startsWith("does ")) {
                    return "Does he/she (3ì¸ì¹­)ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.";
                }
            }
            
            return `"${userAnswer}" â†’ "${correctAnswer}"ë¡œ ìˆ˜ì •ì´ í•„ìš”í•´ìš”.`;
        }
        
        // Level 2 ë¬¸ë²• íŒ
        function getLevel2GrammarTip(stageData) {
            const basicTips = {
                "beë™ì‚¬": "am/are/isëŠ” ìƒíƒœë‚˜ ì¡´ì¬ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.",
                "ì¼ë°˜ë™ì‚¬": "ë™ì‘ì„ ë‚˜íƒ€ë‚´ë©° 3ì¸ì¹­ ë‹¨ìˆ˜ëŠ” -së¥¼ ë¶™ì…ë‹ˆë‹¤.",
                "í˜„ì¬ì§„í–‰í˜•": "beë™ì‚¬ + ingí˜•ìœ¼ë¡œ í˜„ì¬ ì§„í–‰ì¤‘ì¸ ë™ì‘ í‘œí˜„",
                "can": "ëŠ¥ë ¥ì´ë‚˜ ê°€ëŠ¥ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ì¡°ë™ì‚¬",
                "ê³¼ê±°í˜•": "ê³¼ê±°ì˜ ë™ì‘ì´ë‚˜ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ„",
                "ë¯¸ë˜í˜•": "will + ë™ì‚¬ì›í˜•ìœ¼ë¡œ ë¯¸ë˜ ê³„íš í‘œí˜„"
            };
            
            // ìŠ¤í…Œì´ì§€ ì œëª©ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ ì°¾ê¸°
            const title = stageData.title.toLowerCase();
            for (const [keyword, tip] of Object.entries(basicTips)) {
                if (title.includes(keyword.toLowerCase())) {
                    return tip;
                }
            }
            
            return stageData.grammar_focus || "ê¸°ë³¸ ë¬¸ë²• íŒ¨í„´ì„ ì •í™•íˆ ìµí˜€ë³´ì„¸ìš”.";
        }
        
        // Level 2 ê¸°ì–µë²• íŒ
        function getLevel2MemoryTip(stageData, correctAnswer) {
            const tips = [
                `"${correctAnswer}" - 3ë²ˆ í° ì†Œë¦¬ë¡œ ë”°ë¼ ì½ì–´ë³´ì„¸ìš”!`,
                "íŒ¨í„´ì„ ëª¸ì— ìµíˆëŠ” ê²Œ ê°€ì¥ ì¤‘ìš”í•´ìš”.",
                "ë¹„ìŠ·í•œ ë¬¸ì¥ì„ 3ê°œ ë” ë§Œë“¤ì–´ë³´ì„¸ìš”.",
                "ì²« ë‹¨ì–´ë¶€í„° ì²œì²œíˆ ìˆœì„œëŒ€ë¡œ ê¸°ì–µí•˜ì„¸ìš”.",
                "ë§¤ì¼ 5ë¶„ì”© ê°™ì€ íŒ¨í„´ ë°˜ë³µ ì—°ìŠµí•´ë³´ì„¸ìš”!"
            ];
            
            return tips[Math.floor(Math.random() * tips.length)];
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('correct-count').textContent = correctAnswers;
            
            const accuracy = totalAttempts > 0 ? Math.round((correctAnswers / totalAttempts) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }
        
        // ê²°ê³¼ í‘œì‹œ
        function showResults() {
            const accuracy = totalAttempts > 0 ? Math.round((correctAnswers / totalAttempts) * 100) : 0;
            
            alert(`
ğŸ‰ Stage ${stageNumber} ì™„ë£Œ!

ğŸ“Š ê²°ê³¼:
â€¢ ì •ë‹µ: ${correctAnswers}/${totalAttempts}
â€¢ ì •í™•ë„: ${accuracy}%
â€¢ íŒ¨í„´: ${stageData.title}

${accuracy >= 80 ? 'âœ… ëª©í‘œ ë‹¬ì„±!' : 'ğŸ“š ë” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤.'}
            `);
            
            // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
            window.location.href = 'level-system.html';
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('check-btn').addEventListener('click', checkAnswer);
        document.getElementById('skip-btn').addEventListener('click', skipQuestion);
        document.getElementById('hint-btn').addEventListener('click', showHint);
        document.getElementById('ai-btn').addEventListener('click', showAICoaching);
        
        // Enter í‚¤ë¡œ ë‹µì•ˆ í™•ì¸
        document.getElementById('answer-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // ì´ˆê¸°í™”
        loadLevel2Data();
    </script>
</body>
</html>