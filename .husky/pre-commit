#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Pre-commit checks running..."

# Check for large files (>5MB)
large_files=$(find . -type f -size +5M -not -path "./node_modules/*" -not -path "./.git/*" | head -5)
if [ -n "$large_files" ]; then
  echo "‚ùå Large files detected (>5MB):"
  echo "$large_files"
  echo "Please move large files to Firebase Storage"
  exit 1
fi

# Check for forbidden file types
if git diff --cached --name-only | grep -E "\.(log|backup|tar\.gz)$"; then
  echo "‚ùå Forbidden file types detected"
  exit 1
fi

echo "‚úÖ Pre-commit checks passed!"
